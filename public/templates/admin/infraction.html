<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">All Reports</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<!-- /.row -->
<div ng-include = "'/templates/admin/ui-elements/flashMessage.html'"></div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
               List
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="table-responsive">
                      <p>Search :<input type="text" Placeholder="Search here .. " ng-model="search"></p>
                    <table  ng-table="usersTable" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>#</th>

                                <th>Report</th>
                                <th>comment</th>
                                <th>User</th>
                                <th>Report Date</th>
                                <th>Action</th>


                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="x in $data  | filter:search">
                                <td>{{$index+1}}</td>

                                <td ng-if="x.name">{{x.name}}</td>
                                 <td ng-if="!x.name"><b><center>----</center></b></td>
                                 <td ng-if="x.name == 'Other'">{{x.comment}}</td>
                                <td ng-if="x.name != 'Other'"><b><center>----</center></b></td>


                                 <td ng-if="x.userId.fullname" ><a ui-sref="dashboard.profile({refId:x.userId._id})" target="_top">{{x.userId.fullname}}</a></td>
                                  <td ng-if="!x.userId.fullname"><b><center>----</center></b></td>
                                 <td>{{x.createdDate | date :" MM/dd/y"}}</td>
                                  <td ng-if="!x.userId.fullname"><b><center>----</center></b></td>
                                <td ng-if="x.userId.fullname">
                                     <a class="btn btn-link" ui-sref="dashboard.carInfo1({vehicleId: x.vehicleId})"  type="button">Reported Vehicle </a>
                                     <a class="btn btn-link" ng-click = "sendMail(x.userId.email,x.userId._id,x.userId.fullname)" data-toggle="modal" data-target="#myModal">Send Mail</a>
                                     <div class="modal fade" id="myModal" role="dialog">
                                          <div class="modal-dialog">
                                               <!-- Modal content-->
                                               <div class="modal-content">
                                                    <div class="modal-header">
                                                         <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                         <h4 class="modal-title">Send Mail To Reporting User</h4>
                                                    </div>
                                                    <div class="modal-body">


                           <div class="row">
                                <div class="col-md-12">
                                     <div class="panel panel-default">
                                          <div class="panel-heading">
                                               <h3 class="text-center"><strong>Send Email </strong></h3>
                                          </div>
                                          <div class="panel-body">
                                               <div class="">
                                                    <form  name="form"   novalidate>

                                                         <div class="form-group">
                                                          <h4><label> To</label>:{{email}}</h4>
                                                          <!-- {{email}} -->
                                                          <!-- <input type="text" class="form-control"  name="modelname" ng-model="email"> -->


                                                     </div>

                                                        <div class="form-group">
                                                          <label> Message </label>

                                                          <textarea class="form-control" placeholder="Write here  .. " name="desc" ng-model="message" ></textarea>


                                                            </h6>
                                                     </div>




                                                        <!-- <button type="submit" class="btn btn-default" ng-disabled="form.$invalid" ng-click="savebrand(brand);">Save </button> -->

                                                    </form>

                                     <button type="button" class="btn btn-success" style="float: right;" ng-click="sendMailToUser(message,email)" data-dismiss="modal">Send</button>
                                               </div>
                                          </div>
                                     </div>
                                </div>
                           </div>



                      </div>
                      <!-- <div class="modal-footer">
                           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      </div> -->
                 </div>
            </div>
       </div>
                                </td>
                         </tr>

                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-6 -->
</div>
<!-- /.row -->
